{% extends "layout.html" %} {% block title %}Owner Dashboard - RO Solutions{%
endblock %} {% block content %}
<div class="dashboard-welcome">
  <strong>Welcome, {{ session.username }}</strong><br />
  You have full access to manage sales, products, and reports.
</div>

<div class="form-group action-buttons">
  <a href="/products">
    <button>📦 MANAGE PRODUCTS</button>
  </a>
  <a href="/users">
    <button>🧑‍💼 MANAGE BRANCHES</button>
  </a>
  <a href="/report">
    <button>📊 VIEW SALES REPORT</button>
  </a>
  <a href="/add_customer">
    <button>➕ MANAGE CUSTOMERS</button>
  </a>
</div>

<h5>Recent Transactions</h5>
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Batch No</th>
        <th>Sold By</th>
        <th>Payment Method</th>
        <th>Total Quantity</th>
        <th>Total Amount (UGX)</th>
      </tr>
    </thead>
    <tbody>
      {% for batch in sales %}
      <tr>
        <td>{{ batch.date.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          <a href="/batch_sales/{{ batch.batch_number }}"
            >{{ batch.batch_number }}</a
          >
        </td>
        <td>{{ batch.salesperson_name }}</td>
        <td>{{ batch.payment_method }}</td>
        <td>{{ batch.total_quantity }}</td>
        <td>{{ "{:,.0f}".format(batch.total_price or 0) }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div style="margin-top: 20px; text-align: center">
  <a href="/transactions">
    <button
      style="
        background-color: #034078;
        color: white;
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        font-weight: bold;
      "
    >
      📜 View Full Transaction History
    </button>
  </a>
</div>

{% with messages = get_flashed_messages() %} {% if messages %}
<div class="flash-messages">
  {% for message in messages %}
  <div class="alert">{{ message }}</div>
  {% endfor %}
</div>
{% endif %} {% endwith %} {% endblock %}
