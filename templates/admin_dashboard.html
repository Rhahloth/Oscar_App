{% extends "layout.html" %} {% block title %}Admin Dashboard - ROB Solutions{%
endblock %} {% block content %}
<h3 style="margin-top: 20px">System Overview</h3>
<div class="summary-container">
  <div class="summary-card">
    <h4>Total Businesses</h4>
    <p>{{ total_businesses }}</p>
  </div>
  <div class="summary-card">
    <h4>Total Owners</h4>
    <p>{{ total_owners }}</p>
  </div>
  <div class="summary-card">
    <h4>Total Salespeople</h4>
    <p>{{ total_salespeople }}</p>
  </div>
</div>

<h3>Registered Businesses</h3>
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>#Id</th>
        <th>Business Name</th>
        <th>Type</th>
        <th>Phone</th>
        <th>Users</th>
        <th>Status</th>
        <th>Toggle</th>
      </tr>
    </thead>
    <tbody>
      {% for b in businesses %}
      <tr>
        <td>{{b.id}}</td>
        <td>{{ b.name }}</td>
        <td>{{ b.type }}</td>
        <td>{{ b.phone }}</td>
        <td>{{ b.user_count }}</td>
        <td>{{ 'Active' if b.is_active else 'Inactive' }}</td>
        <td>
          <form
            action="/toggle_business/{{ b.id }}"
            method="POST"
            style="display: flex; gap: 10px"
          >
            <button
              type="submit"
              style="
                background-color: #034078;
                color: white;
                border: none;
                padding: 5px 10px;
                border-radius: 4px;
              "
            >
              {{ 'Deactivate' if b.is_active else 'Activate' }}
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
